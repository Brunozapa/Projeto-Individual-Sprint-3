YUI.add("profile-route",function(e){function t(e){t.superclass.constructor.call(this,e)}var i=require("hermes-core/type-validator");e.Routes[this.name]=t,e.extend(t,e.FlickrRoute,{langBundles:this.details.langBundles,run:function(t){var r=this,n={},o={},l=t.query,s=t.params.nsid_or_path_alias,a=t.geo;return i.nsid(s)?n.id=s:n.pathAlias=s,o.personModel=this.appContext.getModel("person-models",n),this.appContext.setGPCredentials(null),new e.FlickrPromise(o).then(function(t){var i=!1,n=t.personModel;return r.appContext.getViewer().signedIn&&n.getValue("nsid")===r.appContext.getViewer().nsid&&(i=!0),new e.FlickrPromise({publicProfile:r.appContext.getModel("person-public-profile-models",n.getValue("nsid"))}).then(function(t){var o=t.publicProfile;return e.Promise.resolve({params:{isEditingTestimonial:l&&""===l.edit,launchEditAvatar:l&&""===l.editAvatar,nsid:n.getValue("nsid"),pathAlias:n.getValue("pathAlias"),isViewingSelf:i,personModel:n,showcaseSetId:o.getValue("showcaseSetId"),geo:a},view:"profile-page-view",title:r.intlMessage({intlName:"profile.ABOUT_USERNAME",username:n.getValue("displayname")}),layout:"scrolling"})})}).catch(function(i){return 5===i.code?r.displayRouteErrors(t,new e.RouteError(410,r.intlMessage({intlName:"common.404_PROFILE_DELETED"}))):r.displayRouteErrors(t,new e.RouteError(404,r.intlMessage({intlName:"common.404_PROFILE_NONEXISTENT"})))})}}),e.mix(t.prototype,e.Localizable)},"@VERSION@",{requires:["flickr-route","flickr-promise"],langBundles:["profile","common"]});