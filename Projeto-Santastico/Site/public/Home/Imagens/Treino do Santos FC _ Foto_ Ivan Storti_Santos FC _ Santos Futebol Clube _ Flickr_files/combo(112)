YUI.add("flickr-testimonials-creator",function(e,s){"use strict";require("hermes-core/flog")(s);e.namespace("ModelCreators")["flickr-testimonials"]={run:function(t,i,o){var r=this,l=this._processParams(t);return new e.FlickrPromise({apiResponse:i.callAPI("flickr.testimonials.addTestimonial",l),personModelRegistry:i.getModelRegistry("person-models"),byUserModel:i.getModel("person-models",i.getViewer().nsid),testimonialsModelRegistry:i.getModelRegistry("testimonials-models"),testimonialModelRegistry:i.getModelRegistry("testimonial-models"),testimonialModel:i.getModel("testimonial-models",t.id)}).then(function(e){return r._processResponse(e,l,t,i)}).catch(e.FetcherErrorLogger(s))},_processResponse:function(e,s,t,i){e.apiResponse;var o=e.byUserModel,r=(e.personModelRegistry,e.testimonialsModelRegistry,e.testimonialModelRegistry),l=(e.testimonialModel,e.apiResponse.testimonials);return!!l&&(r.addOrUpdate({id:l.id,byUser:o,isByViewingUser:i.getViewer().nsid===o.getValue("nsid"),approved:l.approved,dateCreated:l.dateCreate,body:l.body}),r.proxy(l.id))},_processParams:function(s){return{extras:e.APIHelper.request.getRebootPhotoExtras(),user_id:s.id,testimonial_text:s.text}}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["person-models","testimonial-models","testimonials-models"]});YUI.add("testimonials-models",function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ListFetchers["flickr-testimonials-getTestimonials"].run(e,this.appContext)}},attributes:{testimonialsList:{isCollection:!0,pageFetch:{listFetcher:t.ListFetchers["flickr-testimonials-getTestimonials"]}}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-testimonials-getTestimonials-fetcher"]});YUI.add("flickr-testimonials-getTestimonials-fetcher",function(e,s){"use strict";require("hermes-core/flog")(s);e.namespace("ListFetchers")["flickr-testimonials-getTestimonials"]={run:function(t,r,a){var i=this,o=this._processParams(t),n="";return"all"===t.type?n="getAllTestimonialsAbout":"about"===t.type?n="getTestimonialsAbout":"aboutBy"===t.type?n="getTestimonialsAboutBy":"pendingByAbout"===t.type?n="getPendingTestimonialsAboutBy":"allBy"===t.type&&(n="getAllTestimonialsBy"),new e.FlickrPromise({apiResponse:r.callAPI("flickr.testimonials."+n,o),personModelRegistry:r.getModelRegistry("person-models"),testimonialsModelRegistry:r.getModelRegistry("testimonials-models"),testimonialModelRegistry:r.getModelRegistry("testimonial-models")}).then(function(e){return i._processResponse(e,o,t,r)}).catch(e.FetcherErrorLogger(s))},_processResponse:function(s,t,r,a){s.apiResponse;var i,o=s.personModelRegistry,n=s.testimonialsModelRegistry,p=s.testimonialModelRegistry,l=[],d={};return i=r.type+"-"+r.nsid,s.apiResponse&&s.apiResponse.testimonials&&s.apiResponse.testimonials.length&&(l=e.Array.map(s.apiResponse.testimonials,function(s,t){var r={};return s.byUser?r={id:s.id,approved:s.approved,dateCreated:s.dateCreate,isByViewingUser:s.byUser.nsid===a.getViewer().nsid,byUser:o.addOrUpdate(e.APIHelper.response.parsePerson({nsid:s.byUser.nsid,isDeleted:s.byUser.isDeleted,pathAlias:s.byUser.pathAlias,username:s.byUser.username,realname:s.byUser.realname,isAdFree:s.byUser.isAdFree,ispro:s.byUser.ispro,proBadge:s.byUser.proBadge,datecreate:s.byUser.datecreate,iconurls:s.byUser.iconurls})),body:s.body}:s.aboutUser&&(r={id:s.id,approved:s.approved,dateCreated:s.dateCreate,isByViewingUser:!0,aboutUser:o.addOrUpdate(e.APIHelper.response.parsePerson({nsid:s.aboutUser.nsid,isDeleted:s.aboutUser.isDeleted,pathAlias:s.aboutUser.pathAlias,username:s.aboutUser.username,realname:s.aboutUser.realname,isAdFree:s.aboutUser.isAdFree,ispro:s.aboutUser.ispro,proBadge:s.aboutUser.proBadge,datecreate:s.aboutUser.datecreate,iconurls:s.aboutUser.iconurls})),body:s.body}),p.addOrUpdate(r)})),d={id:i},d.testimonialsList={perPage:r.perPage,page:r.page,pageContent:l,totalItems:s.apiResponse.total||0},n.addOrUpdate(d),l},_processParams:function(s){return{extras:e.APIHelper.request.getRebootPhotoExtras(),per_page:s.perPage||10,page:s.page||1,user_id:s.nsid}}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["person-models","testimonial-models","testimonials-models"]});YUI.add("testimonial-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{approve:function(t,r){return t.method="approveTestimonial",e.ModelUpdaters["flickr-testimonials"].run(t,r)},reject:function(t,r){return t.method="deleteTestimonial",e.ModelUpdaters["flickr-testimonials"].run(t,r)},update:function(t,r){return t.method="editTestimonial",e.ModelUpdaters["flickr-testimonials"].run(t,r)},create:function(t,r){return e.ModelCreators["flickr-testimonials"].run(t,r)}},attributes:{byUser:{isModel:!0},aboutUser:{isModel:!0},isByViewingUser:{},body:{},dateCreated:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},approved:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})},"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-testimonials-getTestimonials-fetcher","flickr-testimonials-updater","flickr-testimonials-creator"]});YUI.add("flickr-testimonials-updater",function(e,t){"use strict";require("hermes-core/flog")(t);e.namespace("ModelUpdaters")["flickr-testimonials"]={run:function(s,i,o){var r=this,a=this._processParams(s),l=s.method;return new e.FlickrPromise({apiResponse:i.callAPI("flickr.testimonials."+l,a),personModelRegistry:i.getModelRegistry("person-models"),testimonialsModelRegistry:i.getModelRegistry("testimonials-models"),testimonialModelRegistry:i.getModelRegistry("testimonial-models"),testimonialModel:i.getModel("testimonial-models",s.id)}).then(function(e){return r._processResponse(e,a,s)}).catch(e.FetcherErrorLogger(t))},_processResponse:function(e,t,s){e.apiResponse,e.personModelRegistry,e.testimonialsModelRegistry;var i=e.testimonialModelRegistry,o=e.testimonialModel,r=e.apiResponse.testimonials;return r?(i.addOrUpdate({id:r.id,byUser:o.getValue("byUser"),approved:r.approved,dateCreated:r.dateCreate,body:r.body}),i.proxy(r.id)):"ok"===e.apiResponse.stat?(i.remove(o.getValue("id")),{stat:e.apiResponse.stat,id:s.id}):void 0},_processParams:function(t){var s={extras:e.APIHelper.request.getRebootPhotoExtras(),testimonial_id:t.id,user_id:t.userId};return t.text&&(s.testimonial_text=t.text),s}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["person-models","testimonial-models","testimonials-models"]});YUI.add("hermes-template-testimonial-container",function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,l,t){return"pending"},3:function(e,n,a,l,t){return"by-viewing-user"},compiler:[8,">= 4.3.0"],main:function(e,n,a,l,t){var i,r,o=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,u=e.escapeExpression,m=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="testimonial '+(null!=(i=m(a,"unless").call(o,null!=n?m(n,"approved"):n,{name:"unless",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:1,column:24},end:{line:1,column:62}}}))?i:"")+" "+(null!=(i=m(a,"if").call(o,null!=n?m(n,"isByViewingUser"):n,{name:"if",hash:{},fn:e.program(3,t,0),inverse:e.noop,data:t,loc:{start:{line:1,column:63},end:{line:1,column:108}}}))?i:"")+'" id="testimonial'+u("function"==typeof(r=null!=(r=m(a,"id")||(null!=n?m(n,"id"):n))?r:s)?r.call(o,{name:"id",hash:{},data:t,loc:{start:{line:1,column:125},end:{line:1,column:131}}}):r)+'" data-testimonial-id="'+u("function"==typeof(r=null!=(r=m(a,"id")||(null!=n?m(n,"id"):n))?r:s)?r.call(o,{name:"id",hash:{},data:t,loc:{start:{line:1,column:154},end:{line:1,column:160}}}):r)+'">\n'+(null!=(i=e.invokePartial(m(l,"testimonial"),n,{name:"testimonial",data:t,indent:"\t",helpers:a,partials:l,decorators:e.decorators}))?i:"")+"</div>\n"},usePartial:!0,useData:!0}),l={};e.Array.each(["testimonial"],function(n){var a=e.Template.get("hermes/"+n);a&&(l[n]=a)}),e.Template.register("hermes/testimonial-container",function(n,t){return t=t||{},t.partials=t.partials?e.merge(l,t.partials):l,a(n,t)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-testimonial"]});YUI.add("hermes-template-profile-testimonials",function(n,e){var l=n.Template.Handlebars.revive({1:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<a href="" class="in-header show-write-testim">'+n.escapeExpression((o(l,"intlMessage")||e&&o(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"profile.TESTIM_WRITE"},data:a,loc:{start:{line:2,column:81},end:{line:2,column:128}}}))+"</a>"},3:function(n,e,l,t,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<div class="filter-bar">\n\t<div class="dropdown-link given-about" aria-haspopup="true" aria-expanded="false" tabindex="0"><span class="dropdown-text">'+(null!=(o=r(l,"if").call(null!=e?e:n.nullContext||{},null!=e?r(e,"isViewingGivenTestimonials"):e,{name:"if",hash:{},fn:n.program(4,a,0),inverse:n.program(6,a,0),data:a,loc:{start:{line:5,column:124},end:{line:5,column:284}}}))?o:"")+'</span><span class="dropdown-arrow"></span></div>\n</div>\n'},4:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return n.escapeExpression((o(l,"intlMessage")||e&&o(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"profile.TESTIM_FILTER_GIVEN"},data:a,loc:{start:{line:5,column:158},end:{line:5,column:212}}}))},6:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return n.escapeExpression((o(l,"intlMessage")||e&&o(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"profile.TESTIM_FILTER_RECEIVED"},data:a,loc:{start:{line:5,column:220},end:{line:5,column:277}}}))},8:function(n,e,l,t,a){return"is-viewing-self"},10:function(n,e,l,t,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(o=r(l,"if").call(null!=e?e:n.nullContext||{},null!=e?r(e,"isViewingSelf"):e,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.program(16,a,0),data:a,loc:{start:{line:11,column:3},end:{line:19,column:10}}}))?o:""},11:function(n,e,l,t,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(o=r(l,"if").call(null!=e?e:n.nullContext||{},null!=e?r(e,"isViewingGivenTestimonials"):e,{name:"if",hash:{},fn:n.program(12,a,0),inverse:n.program(14,a,0),data:a,loc:{start:{line:12,column:4},end:{line:16,column:11}}}))?o:""},12:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t\t\t<p>"+n.escapeExpression((o(l,"intlMessage")||e&&o(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"profile.TESTIM_NOTHING_TO_SHOW"},data:a,loc:{start:{line:13,column:8},end:{line:13,column:65}}}))+"</p>\n"},14:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t\t\t<p>"+n.escapeExpression((o(l,"intlMessage")||e&&o(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"profile.TESTIM_EMPTY_SELF"},data:a,loc:{start:{line:15,column:8},end:{line:15,column:60}}}))+"</p>\n"},16:function(n,e,l,t,a){var o,r=null!=e?e:n.nullContext||{},i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t\t<p>"+n.escapeExpression((i(l,"intlMessage")||e&&i(e,"intlMessage")||n.hooks.helperMissing).call(r,{name:"intlMessage",hash:{username:null!=(o=null!=e?i(e,"person"):e)?i(o,"displayname"):o,intlName:"profile.TESTIM_EMPTY"},data:a,loc:{start:{line:18,column:7},end:{line:18,column:82}}}))+" "+(null!=(o=i(l,"unless").call(r,null!=e?i(e,"isIgnoredBy"):e,{name:"unless",hash:{},fn:n.program(17,a,0),inverse:n.noop,data:a,loc:{start:{line:18,column:83},end:{line:18,column:205}}}))?o:"")+"</p>\n"},17:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<a href="" class="show-write-testim">'+n.escapeExpression((o(l,"intlMessage")||e&&o(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"profile.TESTIM_WRITE"},data:a,loc:{start:{line:18,column:143},end:{line:18,column:190}}}))+"</a>"},19:function(n,e,l,t,a){var o,r=null!=e?e:n.nullContext||{},i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return(null!=(o=i(l,"if").call(r,null!=e?i(e,"pendingTestimonialModel"):e,{name:"if",hash:{},fn:n.program(20,a,0),inverse:n.noop,data:a,loc:{start:{line:21,column:3},end:{line:23,column:10}}}))?o:"")+(null!=(o=i(l,"each").call(r,null!=e?i(e,"testimonials"):e,{name:"each",hash:{},fn:n.program(22,a,0),inverse:n.noop,data:a,loc:{start:{line:24,column:3},end:{line:26,column:12}}}))?o:"")},20:function(n,e,l,t,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(o=n.invokePartial(r(t,"testimonial-container"),null!=e?r(e,"pendingTestimonialModel"):e,{name:"testimonial-container",data:a,indent:"\t\t\t\t",helpers:l,partials:t,decorators:n.decorators}))?o:""},22:function(n,e,l,t,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(o=n.invokePartial(r(t,"testimonial-container"),e,{name:"testimonial-container",data:a,indent:"\t\t\t\t",helpers:l,partials:t,decorators:n.decorators}))?o:""},24:function(n,e,l,t,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(o=r(l,"if").call(null!=e?e:n.nullContext||{},null!=e?r(e,"showLoadMore"):e,{name:"if",hash:{},fn:n.program(25,a,0),inverse:n.noop,data:a,loc:{start:{line:30,column:2},end:{line:32,column:9}}}))?o:""},25:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t\t<p class="load-more">'+n.escapeExpression((o(l,"intlMessage")||e&&o(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"profile.TESTIM_SHOW_MORE"},data:a,loc:{start:{line:31,column:24},end:{line:31,column:75}}}))+"</p>\n"},27:function(n,e,l,t,a){return'\t\t<div class="write-testimonial-placeholder"></div>\n'},compiler:[8,">= 4.3.0"],main:function(n,e,l,t,a){var o,r=null!=e?e:n.nullContext||{},i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"<h4>"+n.escapeExpression((i(l,"intlMessage")||e&&i(e,"intlMessage")||n.hooks.helperMissing).call(r,{name:"intlMessage",hash:{intlName:"profile.TESTIMONIALS"},data:a,loc:{start:{line:1,column:4},end:{line:1,column:51}}}))+"</h4>\n"+(null!=(o=i(l,"if").call(r,null!=e?i(e,"showHeaderWriteTestimonial"):e,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:2,column:0},end:{line:2,column:139}}}))?o:"")+"\n"+(null!=(o=i(l,"if").call(r,null!=e?i(e,"isViewingSelf"):e,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:3,column:0},end:{line:7,column:7}}}))?o:"")+'<div class="testimonials-container '+(null!=(o=i(l,"if").call(r,null!=e?i(e,"isViewingSelf"):e,{name:"if",hash:{},fn:n.program(8,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:35},end:{line:8,column:78}}}))?o:"")+'" id="testimonials">\n\t<div class="testimonials-list">\n'+(null!=(o=i(l,"if").call(r,null!=e?i(e,"noTestimonials"):e,{name:"if",hash:{},fn:n.program(10,a,0),inverse:n.program(19,a,0),data:a,loc:{start:{line:10,column:2},end:{line:27,column:9}}}))?o:"")+"\t</div>\n"+(null!=(o=i(l,"unless").call(r,null!=e?i(e,"noTestimonials"):e,{name:"unless",hash:{},fn:n.program(24,a,0),inverse:n.noop,data:a,loc:{start:{line:29,column:1},end:{line:33,column:12}}}))?o:"")+"\n"+(null!=(o=i(l,"unless").call(r,null!=e?i(e,"isViewingSelf"):e,{name:"unless",hash:{},fn:n.program(27,a,0),inverse:n.noop,data:a,loc:{start:{line:35,column:1},end:{line:37,column:12}}}))?o:"")+"</div>\n"},usePartial:!0,useData:!0}),t={};n.Array.each(["testimonial-container","testimonial-container"],function(e){var l=n.Template.get("hermes/"+e);l&&(t[e]=l)}),n.Template.register("hermes/profile-testimonials",function(e,a){return a=a||{},a.partials=a.partials?n.merge(t,a.partials):t,l(e,a)})},"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-testimonial-container","hermes-template-testimonial-container"]});